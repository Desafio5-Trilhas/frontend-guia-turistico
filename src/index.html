<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Turistico do Maranhão</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">

    <!--Boostrap 5-->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->

    <!--Font Family Roboto-->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <!--Swipper Caroousel-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.6.2/swiper-bundle.min.css">

</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="">Pagina inicial</a></li>
        <li><a href="">Login</a></li>
        <li><a href="">Cadastre-se</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <div class="main-title">
      <h1>Explore o Maranhão </h1>
      <h1>com o nosso guia</h1>
      <h2 class="h2-style-margin-t" >Nossa plataforma tem varias missões diaria que você pode aproveitar bastante. </h2>
    </div>

    <section class="section-element">
      <div class="section-card-carousel-search" id="carousel">
          <div class="search-div">
            <div style="width: 90%;">
              <span class="title-search">Destinos populares</span>
              <input type="text" placeholder="Digite um ponto turistico">
            </div>

            <div class="next-and-past-buttons">
              <div class="button-prev">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 448 512">
                    <path fill="#B9BBBE" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>
                  </svg>
                </span>
              </div>
              <div class="button-next"> 
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 448 512">
                    <path fill="#B9BBBE" d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>
                  </svg>
                </span>
            </div>
             
            </div>

          </div>
          <div class="swiper-container">
            <div class="swiper-wrapper">               
            </div>
          </div>


      </div>
      <div class="section-card-details-info" id="tour-details" style="display: none;">
        <div class="details-div">
          <div style="width: 100%; text-align: center;">
            <span class="title-details" id="idPointInfo"></span>
          </div>

          <div class="close-details">
            <div>
              <span>
                <a onclick="closeInfoDetails(event)">
                  <svg xmlns="http://www.w3.org/2000/svg" height="25" width="25" viewBox="0 0 384 512">
                    <path  fill="#F6F1F1" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
                  </svg>
                </a>
              </span>
            </div>
          </div>

        </div>

        <div class="section-tour-details-body">
          <div class="images-details">
              <span class="title-images-details" >Imagens</span>
              <div class="images-container">                
              </div>
          </div>
          <div class="location-details">
            <span class="title-location-details" >Localização</span>
            <div class="location-container">
              <span class="title-secondary" >Buscar por opções de lazer dentro deste ponto turistico</span>
              <select name="points-of-interest-name" id="id-points-of-interest">
              </select>
              <div class="image-google-maps">
              </div>
            </div>
          </div>
          <div class="mission-daily-details">
            <span class="title-mission-details" >Missões Diarias</span>
            <div class="mission-daily-container">
            </div>
          </div>
        </div>
      </div>
      <div></div>

    </section>
  </main>
  <footer>
    © copyright 2024 Todos os direitos reservados | desenvolvido por <span class="names-dev">Marcos Vinicius, Gabriel Silva e Bruno Coelho</span>
  </footer>

<!--Boostrap 5-->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> -->
<script src="./js/create-card-items.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.6.2/swiper-bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var swiper = new Swiper('.swiper-container', {
        slidesPerView: 3, // Número de slides visíveis ao mesmo tempo
        spaceBetween: 25, // Espaçamento entre os slides
        // loop: true, // Ativar loop infinito
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.button-next',
            prevEl: '.button-prev',
        },
        scrollbar: {
            el: '.swiper-scrollbar',
            draggable: true,
        },
        // autoplay: {
        //     delay: 3000, // Intervalo de autoplay em milissegundos
        //     disableOnInteraction: false, // Não desativar autoplay na interação do usuário
        // },
    });
  });
    var carouselItems = document.querySelectorAll('.swiper-slide');
    var carousel = document.getElementById('carousel');
    
    carouselItems.forEach(function(item) {
        item.addEventListener('click', function() {
            carousel.style.display = 'none';
            var tourDetails = document.getElementById('tour-details');
            tourDetails.style.display = '';
            
            setTimeout(function() {
                tourDetails.classList.toggle('raised');
            }, 10); 
            console.log(item)
            fetchInfoDetails(item)
        });
    });

    function fetchInfoDetails(item) {
      let html = "";

      const items = Object.values(jsonData);
      const itemCard = items[item.id.replace('card-item-', '')]

      document.getElementById('idPointInfo').innerHTML = itemCard.cardItemName

      let imagesContainer = document.querySelector('.images-container')

      itemCard.cardImagesSecundary.forEach((item,  index) => {
        html += `<div class="img-slide-${index}">
                <img src="${item}" width="300" height="150" alt="">
              </div>`;
      });
      imagesContainer.innerHTML = html

      let select = document.getElementById('id-points-of-interest')
      let optionHtml = "";

      itemCard.cardItemPointsOptions.forEach((item, index) => {
        optionHtml += `<option>${item}</option>`;
      });
      select.innerHTML = optionHtml

      document.querySelector('.image-google-maps').innerHTML = `
        <img src="${itemCard.cardItemImageGoogleMapsSrc}" width="auto" height="600" alt="">      
      `

      checkMissionDaily(itemCard.existMissionDaily, itemCard)

    }

    function checkMissionDaily(existMissionDaily, itemCard){
      let htmlMission = "";

      const token = localStorage.getItem('authToken');

      let missionContainer = document.querySelector('.mission-daily-container')
      
      // if(!token) {
      //   htmlMission = `
      //     <span class="title-secondary" id="mission-daily-title">
      //       Infelizmente essa opção so esta disponivel para os usuarios 
      //       cadastrados no sistema.
      //     </span>
      //     <div>
      //       <img src="../assets/images/image-default-mission01.png" width="150" height="150"alt="">
      //     </div>
      //   `
      //   missionContainer.innerHTML = htmlMission;

      //   return 
      // }

      if(existMissionDaily == true) {
        let select = document.getElementById('id-points-of-interest')
        let optionHtml = "";

        itemCard.missionsDailyTips.forEach((item, index) => {
          htmlMission += `
            <div class="mission-tip">
              <span class="title-tip">${item}?</span>
              <input type="text" style="width: 45%;">
            </div>
          `;
        });
        htmlMission += `
          <button class="submitButtonTipStyle" onclick="">
            Salvar
          </button>

        `
        missionContainer.innerHTML = htmlMission;

        return 
      }else {
        htmlMission = `
          <span class="title-secondary" id="mission-daily-title">
            Você ja concluiu todas as missões de hoje.
          </span>
          <div>
            <img src="../assets/images/image-default-mission01.png" width="150" height="150"alt="">
          </div>
        `
        missionContainer.innerHTML = htmlMission;

        return 

      }

    }

    function closeInfoDetails(el) {
      var tourDetails = document.getElementById('tour-details');
      
      tourDetails.classList.remove('raised');
      tourDetails.classList.add('closing');
      
      setTimeout(function() {
          tourDetails.style.display = 'none';
          tourDetails.classList.remove('closing');
          carousel.style.display = '';
      }, 500); 
    }

</script>
</body>
</html>